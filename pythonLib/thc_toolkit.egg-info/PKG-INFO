Metadata-Version: 2.4
Name: thc-toolkit
Version: 0.2.3
Summary:  Texas Historical Marker mapping toolkit
Author: Joe Lotz
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: pandas
Requires-Dist: shapely
Requires-Dist: geopy
Requires-Dist: pyproj
Requires-Dist: folium
Requires-Dist: geopandas
Requires-Dist: requests
Requires-Dist: rich


# ğŸ—ºï¸ Texas Historical Markers Toolkit

Processing â€¢ Mapping â€¢ OSM Sync â€¢ Route Planning â€¢ Data Export  
A Python + CLI toolkit for working with **Texas Historical Marker (THC) datasets**, including:

* Exporting **unmapped markers per county**
* Route-based marker visualization with **Folium interactive maps**
* Conversion to **OSM/JOSM nodes** for mapping work
* GeoJSON / KML / CSV generation
* Designed for both **CLI usage** and **importable Python modules**

Ideal for HMDB uploads, OpenStreetMap contributions, field research, and road trip planning.

---

## ğŸ“¦ Installation

Install locally in editable mode to enable CLI commands:

```sh
cd pythonLib      # root project folder
pip install -e .
```

This installs commands system-wide while allowing live code edits with no reinstall.

---

## ğŸ“ Project Layout

```sh
pythonLib/
â”œâ”€ pyproject.toml
â”œâ”€ README.md
â””â”€ thc/
   â”œâ”€ utils.py            â† shared library: Atlas/OSM helpers (importable!)
   â”œâ”€ counties_cli.py     â† CLI tool: unmapped-per-county export
   â”œâ”€ route_cli.py        â† CLI tool: route marker proximity + map creation
   â”œâ”€ osm_cli.py          â† CLI tool: OSM/JOSM node creation + sync workflow
   â”œâ”€ cli.py              â† optional unified entrypoint
   â””â”€ __init__.py
```

â­ Functions in `utils.py` are reusable from your own Python scripts.

---

## ğŸš€ CLI Usage

After installation you get **standalone commands**:

```
osm              # OSM/JOSM node generation & atlas sync tools
routes        # Route-based filtering, mapping, exports
counties    # Unmapped-per-county CSV export utilities
thc                # Optional master entrypoint (if desired)
```

---

### 1) County Filtering & Export

Export unmapped markers (not private, not missing):

```sh
counties --input data.csv --output UnmappedMarkersPerCounty
```

Additional options:

```sh
counties --county Denton
counties --stats
counties --merge combined.csv
counties --summary-json summary.json
```

Defaults:

| Parameter | Default |
|---|---|
| Input CSV | `data.csv` |
| Output directory | `UnmappedMarkersPerCounty/` |

---

### 2) Route-Based Marker Mapping

Generate an interactive map of markers near a KML route:

```sh
routes --track trip.kml --data data.csv
```

Only unmapped:

```sh
routes --track trip.kml --data data.csv --unmapped
```

Export variants:

```sh
routes --track road.kml --data data.csv --csv
routes --track road.kml --data data.csv --geojson --kml
routes --track road.kml --data data.csv --openmap   # auto-launch browser
```

Output files include:

| Output | Trigger |
|---|---|
| near_route_map_*.html | always |
| near_route_*.csv | `--csv` |
| combined_route_markers_*.geojson | `--geojson` |
| THC_markers_route_*.kml | `--kml` |

---

### 3) OSM/JOSM Integration (`utils.py` + `osm_cli.py`)

Convert atlas rows into OSM nodes â†’ push to JOSM â†’ update atlas flags.

#### Generate nodes:

```sh
osm create-nodes --csv atlas.csv --out nodes.json
```

Push to JOSM via Remote Control:

```sh
osm push-josm --nodes nodes.json
```

Find markers missing in OSM:

```sh
osm find-missing --csv atlas.csv --geo osm_extract.geojson
```

Update `isOSM` column and write results:

```sh
osm update-isOSM --csv atlas.csv --nodes nodes.json --out updated.csv
```

---

## ğŸ”¥ Import as a Python Library

The new shared **utils module** allows direct scripting:

```python
from thc.utils import read_atlas, create_nodes, push2josm

df = read_atlas("atlas.csv")
nodes = create_nodes(df)
refs = push2josm(nodes)
```

Or still call full CLI flows programmatically:

```python
from thc.counties_cli import run   # example based on your implementation
from thc.route_cli import generate_route_map
from thc.osm_cli import main       # argument-driven CLI entrypoint
```
